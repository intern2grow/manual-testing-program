<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Buggy Social Post</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="container py-5">
        <!-- Post -->
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">Intern2Grow</h5>
                <p class="card-text">This is a demo post for debugging practice ğŸ</p>

                <!-- Like & Copy -->
                <div class="d-flex gap-3 mb-2">
                    <button id="likePostBtn" class="btn btn-sm btn-outline-primary">
                        ğŸ‘ Like (<span id="postLikeCount">0</span>)
                    </button>
                    <button id="copyLinkBtn" class="btn btn-sm btn-outline-secondary">
                        ğŸ”— Copy Link
                    </button>
                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="modal"
                        data-bs-target="#reactionsModal">
                        ğŸ˜ Reactions
                    </button>
                </div>

                <!-- Comments -->
                <div id="commentsSection" class="mt-3">
                    <div class="border p-2 mb-2">
                        <strong>Alice</strong>: Great post!
                        <div class="d-flex gap-2 mt-1">
                            <button class="btn btn-sm btn-outline-primary like-comment-btn">ğŸ‘ Like
                                (<span>0</span>)</button>
                        </div>
                        <input type="text" class="form-control form-control-sm mt-2 reply-input"
                            placeholder="Write a reply...">
                    </div>

                    <div class="border p-2 mb-2">
                        <strong>Bob</strong>: Needs some improvements.
                        <div class="d-flex gap-2 mt-1">
                            <button class="btn btn-sm btn-outline-primary like-comment-btn">ğŸ‘ Like
                                (<span>0</span>)</button>
                        </div>
                        <input type="text" class="form-control form-control-sm mt-2 reply-input"
                            placeholder="Write a reply...">
                    </div>

                    <div class="border p-2 mb-2">
                        <strong>Charlie</strong>: Following this closely.
                        <div class="d-flex gap-2 mt-1">
                            <button class="btn btn-sm btn-outline-primary like-comment-btn">ğŸ‘ Like
                                (<span>0</span>)</button>
                        </div>
                        <input type="text" class="form-control form-control-sm mt-2 reply-input"
                            placeholder="Write a reply...">
                    </div>
                </div>

                <!-- Add Comment -->
                <div class="input-group mt-2">
                    <input id="commentInput" type="text" class="form-control" placeholder="Write a comment...">
                    <button id="addCommentBtn" class="btn btn-primary">Post</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reactions Modal (cannot close by any means) -->
    <div class="modal fade" id="reactionsModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reactions</h5>
                </div>
                <div class="modal-body">
                    <p>ğŸ˜ â¤ï¸ ğŸ˜‚ ğŸ˜® ğŸ˜¢ ğŸ˜¡</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // âŒ Bug: Copy to clipboard not working
        document.getElementById("copyLinkBtn").addEventListener("click", function () {
            navigator.clipboard.write("https://intern2grow.com/post/123"); // wrong API
            alert("Link copied!");
        });

        // âŒ Bug: Like button only changes color, no count increase
        document.getElementById("likePostBtn").addEventListener("click", function (e) {
            e.target.classList.toggle("btn-primary");
        });

        // âŒ Bug: Comment like button only changes color
        document.addEventListener("click", function (e) {
            if (e.target.classList.contains("like-comment-btn")) {
                e.target.classList.toggle("btn-primary");
                // counter not updated
            }
        });

        // âŒ Bug: Adding comment
        document.getElementById("addCommentBtn").addEventListener("click", function () {
            const input = document.getElementById("commentInput");
            const newComment = document.createElement("div");
            newComment.className = "border p-2 mb-2";
            newComment.innerHTML = `<strong>You</strong>: ${input.value}
        <div class="d-flex gap-2 mt-1">
          <button class="btn btn-sm btn-outline-primary like-comment-btn">ğŸ‘ Like (<span>0</span>)</button>
        </div>
        <input type="text" class="form-control form-control-sm mt-2 reply-input" placeholder="Write a reply...">`;
            document.getElementById("commentsSection").appendChild(newComment);
            input.value = "";
        });

        // âŒ Bug: Replies always go to the bottom instead of under the comment
        document.addEventListener("keypress", function (e) {
            if (e.target.classList.contains("reply-input") && e.key === "Enter") {
                const replyText = e.target.value;
                const reply = document.createElement("div");
                reply.className = "border p-2 mb-2";
                reply.innerHTML = `<strong>You</strong>: ${replyText}`;
                document.getElementById("commentsSection").appendChild(reply); // wrong placement
                e.target.value = "";
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>